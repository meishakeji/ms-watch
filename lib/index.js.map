{"version":3,"file":"index.js","mappings":"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","sources":["webpack://meisha_watch/webpack/universalModuleDefinition","webpack://meisha_watch/./node_modules/js-base64/base64.js","webpack://meisha_watch/./src/config.js","webpack://meisha_watch/./src/console.js","webpack://meisha_watch/./src/device.js","webpack://meisha_watch/./src/error.js","webpack://meisha_watch/./src/index.js","webpack://meisha_watch/./src/postData.js","webpack://meisha_watch/./src/storage.js","webpack://meisha_watch/./src/timing.js","webpack://meisha_watch/./src/userAction.js","webpack://meisha_watch/./src/utils.js","webpack://meisha_watch/webpack/bootstrap","webpack://meisha_watch/webpack/runtime/global","webpack://meisha_watch/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"meisha_watch\"] = factory();\n\telse\n\t\troot[\"meisha_watch\"] = factory();\n})(self, function() {\nreturn ","//\n// THIS FILE IS AUTOMATICALLY GENERATED! DO NOT EDIT BY HAND!\n//\n;\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? module.exports = factory()\n        : typeof define === 'function' && define.amd\n            ? define(factory) :\n            // cf. https://github.com/dankogai/js-base64/issues/119\n            (function () {\n                // existing version for noConflict()\n                var _Base64 = global.Base64;\n                var gBase64 = factory();\n                gBase64.noConflict = function () {\n                    global.Base64 = _Base64;\n                    return gBase64;\n                };\n                if (global.Meteor) { // Meteor.js\n                    Base64 = gBase64;\n                }\n                global.Base64 = gBase64;\n            })();\n}((typeof self !== 'undefined' ? self\n    : typeof window !== 'undefined' ? window\n        : typeof global !== 'undefined' ? global\n            : this), function () {\n    'use strict';\n    /**\n     *  base64.ts\n     *\n     *  Licensed under the BSD 3-Clause License.\n     *    http://opensource.org/licenses/BSD-3-Clause\n     *\n     *  References:\n     *    http://en.wikipedia.org/wiki/Base64\n     *\n     * @author Dan Kogai (https://github.com/dankogai)\n     */\n    var version = '3.7.2';\n    /**\n     * @deprecated use lowercase `version`.\n     */\n    var VERSION = version;\n    var _hasatob = typeof atob === 'function';\n    var _hasbtoa = typeof btoa === 'function';\n    var _hasBuffer = typeof Buffer === 'function';\n    var _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\n    var _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\n    var b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var b64chs = Array.prototype.slice.call(b64ch);\n    var b64tab = (function (a) {\n        var tab = {};\n        a.forEach(function (c, i) { return tab[c] = i; });\n        return tab;\n    })(b64chs);\n    var b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\n    var _fromCC = String.fromCharCode.bind(String);\n    var _U8Afrom = typeof Uint8Array.from === 'function'\n        ? Uint8Array.from.bind(Uint8Array)\n        : function (it, fn) {\n            if (fn === void 0) { fn = function (x) { return x; }; }\n            return new Uint8Array(Array.prototype.slice.call(it, 0).map(fn));\n        };\n    var _mkUriSafe = function (src) { return src\n        .replace(/=/g, '').replace(/[+\\/]/g, function (m0) { return m0 == '+' ? '-' : '_'; }); };\n    var _tidyB64 = function (s) { return s.replace(/[^A-Za-z0-9\\+\\/]/g, ''); };\n    /**\n     * polyfill version of `btoa`\n     */\n    var btoaPolyfill = function (bin) {\n        // console.log('polyfilled');\n        var u32, c0, c1, c2, asc = '';\n        var pad = bin.length % 3;\n        for (var i = 0; i < bin.length;) {\n            if ((c0 = bin.charCodeAt(i++)) > 255 ||\n                (c1 = bin.charCodeAt(i++)) > 255 ||\n                (c2 = bin.charCodeAt(i++)) > 255)\n                throw new TypeError('invalid character found');\n            u32 = (c0 << 16) | (c1 << 8) | c2;\n            asc += b64chs[u32 >> 18 & 63]\n                + b64chs[u32 >> 12 & 63]\n                + b64chs[u32 >> 6 & 63]\n                + b64chs[u32 & 63];\n        }\n        return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n    };\n    /**\n     * does what `window.btoa` of web browsers do.\n     * @param {String} bin binary string\n     * @returns {string} Base64-encoded string\n     */\n    var _btoa = _hasbtoa ? function (bin) { return btoa(bin); }\n        : _hasBuffer ? function (bin) { return Buffer.from(bin, 'binary').toString('base64'); }\n            : btoaPolyfill;\n    var _fromUint8Array = _hasBuffer\n        ? function (u8a) { return Buffer.from(u8a).toString('base64'); }\n        : function (u8a) {\n            // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n            var maxargs = 0x1000;\n            var strs = [];\n            for (var i = 0, l = u8a.length; i < l; i += maxargs) {\n                strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n            }\n            return _btoa(strs.join(''));\n        };\n    /**\n     * converts a Uint8Array to a Base64 string.\n     * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 §5\n     * @returns {string} Base64 string\n     */\n    var fromUint8Array = function (u8a, urlsafe) {\n        if (urlsafe === void 0) { urlsafe = false; }\n        return urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n    };\n    // This trick is found broken https://github.com/dankogai/js-base64/issues/130\n    // const utob = (src: string) => unescape(encodeURIComponent(src));\n    // reverting good old fationed regexp\n    var cb_utob = function (c) {\n        if (c.length < 2) {\n            var cc = c.charCodeAt(0);\n            return cc < 0x80 ? c\n                : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                    + _fromCC(0x80 | (cc & 0x3f)))\n                    : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                        + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                        + _fromCC(0x80 | (cc & 0x3f)));\n        }\n        else {\n            var cc = 0x10000\n                + (c.charCodeAt(0) - 0xD800) * 0x400\n                + (c.charCodeAt(1) - 0xDC00);\n            return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n                + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n                + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                + _fromCC(0x80 | (cc & 0x3f)));\n        }\n    };\n    var re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n    /**\n     * @deprecated should have been internal use only.\n     * @param {string} src UTF-8 string\n     * @returns {string} UTF-16 string\n     */\n    var utob = function (u) { return u.replace(re_utob, cb_utob); };\n    //\n    var _encode = _hasBuffer\n        ? function (s) { return Buffer.from(s, 'utf8').toString('base64'); }\n        : _TE\n            ? function (s) { return _fromUint8Array(_TE.encode(s)); }\n            : function (s) { return _btoa(utob(s)); };\n    /**\n     * converts a UTF-8-encoded string to a Base64 string.\n     * @param {boolean} [urlsafe] if `true` make the result URL-safe\n     * @returns {string} Base64 string\n     */\n    var encode = function (src, urlsafe) {\n        if (urlsafe === void 0) { urlsafe = false; }\n        return urlsafe\n            ? _mkUriSafe(_encode(src))\n            : _encode(src);\n    };\n    /**\n     * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 §5.\n     * @returns {string} Base64 string\n     */\n    var encodeURI = function (src) { return encode(src, true); };\n    // This trick is found broken https://github.com/dankogai/js-base64/issues/130\n    // const btou = (src: string) => decodeURIComponent(escape(src));\n    // reverting good old fationed regexp\n    var re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\n    var cb_btou = function (cccc) {\n        switch (cccc.length) {\n            case 4:\n                var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                    | ((0x3f & cccc.charCodeAt(1)) << 12)\n                    | ((0x3f & cccc.charCodeAt(2)) << 6)\n                    | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n                return (_fromCC((offset >>> 10) + 0xD800)\n                    + _fromCC((offset & 0x3FF) + 0xDC00));\n            case 3:\n                return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                    | ((0x3f & cccc.charCodeAt(1)) << 6)\n                    | (0x3f & cccc.charCodeAt(2)));\n            default:\n                return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                    | (0x3f & cccc.charCodeAt(1)));\n        }\n    };\n    /**\n     * @deprecated should have been internal use only.\n     * @param {string} src UTF-16 string\n     * @returns {string} UTF-8 string\n     */\n    var btou = function (b) { return b.replace(re_btou, cb_btou); };\n    /**\n     * polyfill version of `atob`\n     */\n    var atobPolyfill = function (asc) {\n        // console.log('polyfilled');\n        asc = asc.replace(/\\s+/g, '');\n        if (!b64re.test(asc))\n            throw new TypeError('malformed base64.');\n        asc += '=='.slice(2 - (asc.length & 3));\n        var u24, bin = '', r1, r2;\n        for (var i = 0; i < asc.length;) {\n            u24 = b64tab[asc.charAt(i++)] << 18\n                | b64tab[asc.charAt(i++)] << 12\n                | (r1 = b64tab[asc.charAt(i++)]) << 6\n                | (r2 = b64tab[asc.charAt(i++)]);\n            bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)\n                : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)\n                    : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n        }\n        return bin;\n    };\n    /**\n     * does what `window.atob` of web browsers do.\n     * @param {String} asc Base64-encoded string\n     * @returns {string} binary string\n     */\n    var _atob = _hasatob ? function (asc) { return atob(_tidyB64(asc)); }\n        : _hasBuffer ? function (asc) { return Buffer.from(asc, 'base64').toString('binary'); }\n            : atobPolyfill;\n    //\n    var _toUint8Array = _hasBuffer\n        ? function (a) { return _U8Afrom(Buffer.from(a, 'base64')); }\n        : function (a) { return _U8Afrom(_atob(a), function (c) { return c.charCodeAt(0); }); };\n    /**\n     * converts a Base64 string to a Uint8Array.\n     */\n    var toUint8Array = function (a) { return _toUint8Array(_unURI(a)); };\n    //\n    var _decode = _hasBuffer\n        ? function (a) { return Buffer.from(a, 'base64').toString('utf8'); }\n        : _TD\n            ? function (a) { return _TD.decode(_toUint8Array(a)); }\n            : function (a) { return btou(_atob(a)); };\n    var _unURI = function (a) { return _tidyB64(a.replace(/[-_]/g, function (m0) { return m0 == '-' ? '+' : '/'; })); };\n    /**\n     * converts a Base64 string to a UTF-8 string.\n     * @param {String} src Base64 string.  Both normal and URL-safe are supported\n     * @returns {string} UTF-8 string\n     */\n    var decode = function (src) { return _decode(_unURI(src)); };\n    /**\n     * check if a value is a valid Base64 string\n     * @param {String} src a value to check\n      */\n    var isValid = function (src) {\n        if (typeof src !== 'string')\n            return false;\n        var s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n        return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n    };\n    //\n    var _noEnum = function (v) {\n        return {\n            value: v, enumerable: false, writable: true, configurable: true\n        };\n    };\n    /**\n     * extend String.prototype with relevant methods\n     */\n    var extendString = function () {\n        var _add = function (name, body) { return Object.defineProperty(String.prototype, name, _noEnum(body)); };\n        _add('fromBase64', function () { return decode(this); });\n        _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n        _add('toBase64URI', function () { return encode(this, true); });\n        _add('toBase64URL', function () { return encode(this, true); });\n        _add('toUint8Array', function () { return toUint8Array(this); });\n    };\n    /**\n     * extend Uint8Array.prototype with relevant methods\n     */\n    var extendUint8Array = function () {\n        var _add = function (name, body) { return Object.defineProperty(Uint8Array.prototype, name, _noEnum(body)); };\n        _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n        _add('toBase64URI', function () { return fromUint8Array(this, true); });\n        _add('toBase64URL', function () { return fromUint8Array(this, true); });\n    };\n    /**\n     * extend Builtin prototypes with relevant methods\n     */\n    var extendBuiltins = function () {\n        extendString();\n        extendUint8Array();\n    };\n    var gBase64 = {\n        version: version,\n        VERSION: VERSION,\n        atob: _atob,\n        atobPolyfill: atobPolyfill,\n        btoa: _btoa,\n        btoaPolyfill: btoaPolyfill,\n        fromBase64: decode,\n        toBase64: encode,\n        encode: encode,\n        encodeURI: encodeURI,\n        encodeURL: encodeURI,\n        utob: utob,\n        btou: btou,\n        decode: decode,\n        isValid: isValid,\n        fromUint8Array: fromUint8Array,\n        toUint8Array: toUint8Array,\n        extendString: extendString,\n        extendUint8Array: extendUint8Array,\n        extendBuiltins: extendBuiltins\n    };\n    //\n    // export Base64 to the namespace\n    //\n    // ES5 is yet to have Object.assign() that may make transpilers unhappy.\n    // gBase64.Base64 = Object.assign({}, gBase64);\n    gBase64.Base64 = {};\n    Object.keys(gBase64).forEach(function (k) { return gBase64.Base64[k] = gBase64[k]; });\n    return gBase64;\n}));\n","\nconst HOST = \"test-monitor.meishakeji.com\";\n\nconst ENV = {\n  LOCAL: /^(127.0.0.1|localhost|192.168)/.test(window.location.host),\n  DEV: /^(127.0.0.1|localhost|192.168|nathan-|dev-|hank-|kerry-|39.108.58.1)/.test(\n    window.location.host\n  ),\n  TEST: /^test-/.test(window.location.host),\n  PRE: /^pre-/.test(window.location.host),\n};\n\nconst getBaseUrl = () => {\n  let baseUrl = \"\";\n\n  if (ENV.DEV) {\n    baseUrl = `//${DEVELOP_LOCAL_HOST}`;\n  } else if (ENV.TEST) {\n    baseUrl = `//test-${HOST}`;\n  } else if (ENV.PRE) {\n    baseUrl = HOST ? `//pre-${HOST}` : \"\";\n  } else {\n    baseUrl = `//${HOST}`;\n  }\n  return baseUrl;\n};\n\nconst initLog = () => {\n  if (ENV.DEV || ENV.TEST) {\n    window.log = console.log.bind(console);\n  } else {\n    window.log = () => {};\n  }\n};\n\n\n\nconst TimeLog = [\n  {\n    key: \"redirectTime\",\n    value: \"重定向耗时\",\n  },\n  {\n    key: \"dnsTime\",\n    value: \"DNS解析耗时\",\n  },\n  {\n    key: \"connectTime\",\n    value: \"TCP连接耗时\",\n  },\n  {\n    key: \"requestTime\",\n    value: \"HTTP请求耗时\",\n  },\n  {\n    key: \"firstByteTime\",\n    value: \"首字节耗时\",\n  },\n  // {\n  //   key: \"domReadyTime\",\n  //   value: \"解析dom树耗时\",\n  // },\n  // {\n  //   key: \"whiteTime\",\n  //   value: \"白屏时间\",\n  // },\n  {\n    key: \"domLoadTime\",\n    value: \"DOMready时间\",\n  },\n  {\n    key: \"jsEventTime\",\n    value: \"脚本加载时间\",\n  },\n  {\n    key: \"fpTime\",\n    value: \"FP首屏时间\",\n  },\n  // {\n  //   key: \"fcpTime\",\n  //   value: \"FCP首次绘制时间\",\n  // },\n  {\n    key: \"ttiTime\",\n    value: \"首次可交互时间\",\n  },\n  {\n    key: \"loadTime\",\n    value: \"页面加载完成的时间\",\n  },\n];\n\n// 上报间隔时间\nconst reportSplitTime = 1000 * 10;\n// 错误超过6条上报\nconst errorNum = 3;\nconst actionNum = 3;\n\nmodule.exports = {\n  getBaseUrl,\n  initLog,\n  TimeLog,\n  reportSplitTime,\n  errorNum,\n  actionNum,\n};","\n// console error warn 错误警告收集类\n// console.log 格式化log\nclass MSConsole {\n  constructor() {\n    this.console = window.console;\n    this.infoList = [];\n    this.infoFns = [];\n    this.warnList = [];\n    this.warnFns = [];\n    this.errorList = [];\n    this.errorFns = [];\n  }\n\n  log(obj, color1 = \"#35495e\", color2 = \"#41b883\") {\n    for (let key in obj) {\n      log(\n        `%c ${key} %c ${obj[key]} `,\n        `background: ${color1} ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff`,\n        `background: ${color2} ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff`\n      );\n    }\n  }\n\n  info(callback) {\n    const info = this.console.info;\n    if (typeof callback === \"function\") {\n      this.infoFns.push(callback);\n    }\n    window.console.info = (...arg) => {\n      this.infoList.push({\n        arg,\n        url: encodeURIComponent(window.location.href),\n      });\n      for (let fn of this.infoFns) {\n        fn(...arg);\n      }\n      info(...arg);\n    };\n  }\n\n  warn(callback) {\n    const warn = this.console.warn;\n    if (typeof callback === \"function\") {\n      this.warnFns.push(callback);\n    }\n    window.console.warn = (...arg) => {\n      this.warnList.push({\n        arg,\n        url: encodeURIComponent(window.location.href),\n        createTime: Math.floor(Date.now() / 1000),\n      });\n      for (let fn of this.warnFns) {\n        fn(...arg);\n      }\n      warn(...arg);\n    };\n  }\n\n  error(callback) {\n    const error = this.console.error;\n    if (typeof callback === \"function\") {\n      this.errorFns.push(callback);\n    }\n    window.console.error = (...arg) => {\n      this.errorList.push({\n        arg,\n        url: encodeURIComponent(window.location.href),\n        createTime: Math.floor(Date.now() / 1000),\n      });\n      for (let fn of this.errorFns) {\n        fn(...arg);\n      }\n      error(...arg);\n    };\n  }\n\n  getInfo() {\n    return {\n      warnList: this.warnList,\n      errorList: this.errorList,\n    };\n  }\n\n  clearInfo() {\n    this.errorList = [];\n    this.warnList = [];\n  }\n}\n\nmodule.exports = {\n  MSConsole,\n};","\n// 主要用于收集设备信息\nclass MSDevice {\n  constructor(performance) {\n    this.width =\n      document.documentElement.clientWidth || document.body.clientWidth; //浏览器宽度\n    this.height =\n      document.documentElement.clientHeight || document.body.clientHeight; //浏览器高度\n    this.userAgent =\n      (\"navigator\" in window &&\n        \"userAgent\" in navigator &&\n        navigator.userAgent.toLowerCase()) || \"\";\n    const p =\n      window.performance || window.msPerformance || window.webkitPerformance;\n\n    this.performance = performance || p;\n    this.osVersion = this.getOS();\n    this.browserVersion = this.getExplore();\n    this.network = this.getNetWork();\n    \n    this.createTime = Date.now();\n    this.memory = this.getMemory();\n  }\n\n  getOS() {\n    var userAgent = this.userAgent;\n    var vendor =\n      (\"navigator\" in window &&\n        \"vendor\" in navigator &&\n        navigator.vendor.toLowerCase()) ||\n      \"\";\n    var appVersion =\n      (\"navigator\" in window &&\n        \"appVersion\" in navigator &&\n        navigator.appVersion.toLowerCase()) ||\n      \"\";\n\n    if (/mac/i.test(appVersion)) {\n      return \"MacOSX\";\n    }\n    if (/win/i.test(appVersion)) {\n      return \"windows\";\n    }\n    if (/linux/i.test(appVersion)) {\n      return \"linux\";\n    }\n    if (/iphone/i.test(userAgent) || /ipod/i.test(userAgent)) {\n      return \"ios\";\n    }\n    if (/ipad/i.test(userAgent)) {\n      return \"ipad\";\n    }\n    if (/android/i.test(userAgent)) {\n      return \"android\";\n    }\n    if (/win/i.test(appVersion) && /phone/i.test(userAgent)) {\n      return \"windowsPhone\";\n    }\n  }\n\n  getExplore() {\n    var sys = {},\n      ua = navigator.userAgent.toLowerCase(),\n      s;\n    (s = ua.match(/rv:([\\d.]+)\\) like gecko/))\n      ? (sys.ie = s[1])\n      : (s = ua.match(/msie ([\\d\\.]+)/))\n      ? (sys.ie = s[1])\n      : (s = ua.match(/edge\\/([\\d\\.]+)/))\n      ? (sys.edge = s[1])\n      : (s = ua.match(/firefox\\/([\\d\\.]+)/))\n      ? (sys.firefox = s[1])\n      : (s = ua.match(/(?:opera|opr).([\\d\\.]+)/))\n      ? (sys.opera = s[1])\n      : (s = ua.match(/micromessenger\\/([\\d\\.]+)/i))\n      ? (sys.weixin = s[1])\n      : (s = ua.match(/chrome\\/([\\d\\.]+)/))\n      ? (sys.chrome = s[1])\n      : (s = ua.match(/version\\/([\\d\\.]+).*safari/))\n      ? (sys.safari = s[1])\n      : (s = ua.match(/weibo\\/([\\d\\.]+)/i))\n      ? (sys.weibo = s[1])\n      : 0;\n    // 根据关系进行判断\n    if (sys.ie) return \"IE: \" + sys.ie;\n    if (sys.edge) return \"EDGE: \" + sys.edge;\n    if (sys.firefox) return \"Firefox: \" + sys.firefox;\n    if (sys.weixin) return \"weixin: \" + sys.weixin;\n    if (sys.chrome) return \"Chrome: \" + sys.chrome;\n    if (sys.opera) return \"Opera: \" + sys.opera;\n    if (sys.safari) return \"Safari: \" + sys.safari;\n    if (sys.weibo) return \"weibo: \" + sys.weibo;\n    return \"Unkonwn\";\n  }\n\n  getNetWork() {\n    var connection = navigator.connection ||\n      navigator.mozConnection ||\n      navigator.webkitConnection || { tyep: \"unknown\" };\n    const { effectiveType, downlink, rtt } = connection;\n\n    if (typeof downlink == \"number\") {\n      if (downlink >= 10) {\n        connection.type = \"wifi\";\n      } else if (downlink > 2) {\n        connection.type = \"3g\";\n      } else if (downlink > 0) {\n        connection.type = \"2g\";\n      } else if (downlink == 0) {\n        connection.type = \"none\";\n      } else {\n        connection.type = \"unknown\";\n      }\n    }\n    return {\n      type: effectiveType || connection.type,\n      downlink: downlink,\n      rtt: rtt,\n      isOnline: navigator.onLine,\n    };\n  }\n\n  computedSize(value) {\n    return value / 1024 / 1024;\n  }\n\n  getMemory() {\n    const { usedJSHeapSize, totalJSHeapSize, jsHeapSizeLimit } =\n      this.performance.memory;\n    \n    return {\n      usedSize: this.computedSize(usedJSHeapSize).toFixed(2) + ' MB',\n      totalSize: this.computedSize(totalJSHeapSize).toFixed(2) + ' MB',\n      limitSize: this.computedSize(jsHeapSizeLimit).toFixed(2) + ' MB',\n      // usedJSHeapSize,\n      // totalJSHeapSize,\n      // jsHeapSizeLimit,\n    };\n  }\n\n  getInfo() {\n\n    return {\n      width: this.width,\n      height: this.height,\n      userAgent: this.userAgent,\n      osVersion: this.osVersion,\n      browserVersion: this.browserVersion,\n      network: this.network,\n      // createTime: this.createTime,\n      memory: this.memory,\n      // url: window.location.href,\n    };\n  }\n}\nmodule.exports = {\n  MSDevice,\n};","\n// 主要用来收集错误信息\nconst ErrorType = {\n  SyntaxError: \"语法错误\",\n  TypeError: \"类型错误\",\n  ReferenceError: \"声明错误\",\n  RangeError: \"栈溢出错误\",\n  ResourceError: \"资源加载错误\",\n  HttpError: \"http请求错误\",\n};\n\n// vue错误、react错误需要 throw 错误\n// Vue.config.errorHandler = function (err) {\n//   setTimeout(() => {\n//     throw err\n//   })\n// }\n// \nclass MSError {\n  constructor() {\n    this.errorList = [];\n  }\n  // type 为 error 捕获语法等js错误\n  // type 为 unhandledrejection 捕获 promise 错误\n  recordError(callback) {\n    this.handleAddListener(\"error\", (e) => {\n      this.dealError(e, callback);\n    });\n    this.handleAddListener(\"unhandledrejection\", (e) => {\n      this.dealError(e, callback);\n    });\n    this.handlerError((message, source, lineno, colno, error) => {\n      const e = {\n        type: 'runError',\n        message,\n        source,\n        lineno,\n        colno,\n        ...error\n      }\n      this.dealError(e, callback);\n    });\n  }\n  findItem(array, { message, errorType, type, outerHTML }) {\n    for(let item of array) {\n      const bool1 = message && item.message === message && item.errorType === errorType;\n      const bool2 = outerHTML && item.outerHTML === outerHTML && item.type === type;\n      if(bool1 || bool2) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // 处理错误\n  dealError(e, callback) {\n    const result = this.getError(e);\n    \n    const bool = this.findItem(this.errorList, result);\n    if(!bool) {\n      this.errorList.push(result);\n    }\n    if(callback && typeof callback === 'function') {\n      callback(e);\n    }\n  }\n\n  // TypeError: 类型错误\n  getSyntaxError(e) {\n    const error = e.error;\n    const errorType = error.stack.split(\":\")[0];\n    const errorText = ErrorType[errorType];\n    let target = \"\";\n    if (e.target === window) {\n      target = \"window\";\n    } else if (e.target === document) {\n      target = \"document\";\n    } else {\n      target = e.target && e.target.nodeName || '';\n    }\n    let obj = {\n      errorText,\n      errorType,\n      type: e.type,\n      message: error.message,\n      stack: error.stack,\n      nodeName: target,\n    };\n    if(error.colno) {\n      Object.assign(obj, {\n        colno: error.colno,\n      })\n    }\n    if(error.lineno) {\n      Object.assign(obj, {\n        lineno: error.lineno,\n      })\n    }\n    return obj;\n  }\n  // promise 错误\n  getPromiseError(e) {\n    const reason = e.reason;\n    const errorList = reason.stack && reason.stack.split(\":\");\n    const errorType = errorList && errorList[0];\n    const errorText = ErrorType[errorType] || '未定义错误';\n    let obj = {\n      errorText,\n      errorType,\n      type: e.type,\n      message: reason.message,\n      stack: reason.stack,\n      nodeName: 'window',\n    };\n    return obj;\n  }\n  // ResourceError: 资源加载错误\n  getResourceError(e) {\n    let obj = {};\n    const target = e.target;\n    const nodeNames = [\"img\", \"script\", \"link\"];\n    const name = target.nodeName.toLocaleLowerCase();\n    if (nodeNames.includes(name)) {\n      obj = {\n        nodeName: target.nodeName,\n        errorText: \"资源加载错误\",\n        errorType: \"ResourceError\",\n        src: target.src || target.href,\n        className: target.className,\n        outerHTML: target.outerHTML,\n        type: e.type,\n      };\n      if(name === 'img') {\n        Object.assign(obj, {\n          top: target.x,\n          left: target.y,\n          width: target.width,\n          height: target.height,\n        })\n      }\n    }\n    return obj;\n  }\n  // 运行的错误\n  getRunError(e) {\n    const errorType = e.message && e.message.split(':')[0] && e.message.split(':')[0].split(' ')[1];\n    const errorText = ErrorType[errorType];\n    return {\n      nodeName: 'window',\n      errorText,\n      errorType,\n      type: 'runError',\n      message: e.message,\n      source: e.source,\n      lineno: e.lineno,\n      colno: e.colno,\n      stack: e.stack,\n    }\n  }\n\n  getError(e) {\n    const error = e.error;\n    const reason = e.reason;\n    let obj = {};\n    if (e.target && e.target.nodeName) {\n      obj = this.getResourceError(e);\n    } else if (error) {\n      obj = this.getSyntaxError(e);\n    } else if (reason) {\n      obj = this.getPromiseError(e);\n    } else if(e.type === 'runError') {\n      obj = this.getRunError(e);\n    }\n    Object.assign(obj, {\n      createTime: Math.floor(Date.now() / 1000),\n      // id: guid(24),\n      url: encodeURIComponent(window.location.href),\n    })\n    return obj;\n  }\n  // 图片、script、css加载错误\n  handleAddListener(type, fn) {\n    if (window.addEventListener) {\n      window.addEventListener(type, fn, true);\n    } else {\n      window.attachEvent(\"on\" + type, fn);\n    }\n  }\n  handlerError(fn) {\n    window.onerror = fn;\n  }\n\n  clearInfo() {\n    this.errorList = [];\n  }\n}\n\nmodule.exports = {\n  MSError,\n};\n","// 用户信息|内存信息| 导航信息|网络质量|用户操作路径｜javascript 异常信息 ｜ js执行时间 ｜ user-agent｜报文生成时间 \n\nconst { MSTiming } = require(\"./timing.js\");\nconst { MSDevice } = require(\"./device.js\");\nconst { MSConsole } = require(\"./console.js\");\nconst { TimeLog, reportSplitTime, errorNum, actionNum, initLog } = require(\"./config.js\");\nconst { MSError } = require(\"./error.js\");\nconst { MSUserAction } = require(\"./userAction.js\");\nconst { MSSendData } = require(\"./postData.js\");\nconst { MSStorage } = require(\"./storage.js\");  \nconst { guid } = require('./utils.js');\nconst { encode, decode } = require('js-base64');\n\nclass MsWatch {\n  constructor(data) {\n    try {\n      initLog();\n      const { projectName, url, router, reportTime, errorMaxNum, actionMaxNum } = data || {};\n      this.reportTime = reportTime || reportSplitTime;\n      this.errorMaxNum = errorMaxNum || errorNum;\n      this.actionMaxNum = actionMaxNum || actionNum;\n      this.error = new MSError();\n      this.listenLoad();\n      this.listenUnload();\n      this.listenVisible();\n      this.timing = null;\n      this.device = null;\n      this.mconsole = null;\n      this.action = null;\n      this.storage = null;\n      this.useInfo = null;\n      this.timeId = guid();\n      window.encode = encode;\n      window.decode = decode;\n      if(!projectName) {\n        throw new Error('projectName 不能为空');\n      }\n      if(!url) {\n        throw new Error('URL 不能为空');\n      }\n      if(!router) {\n        throw new Error('请传入router实例')\n      }\n      this.projectName = projectName;\n      this.url = url;\n      this.router = router;\n      this.firstEnter = true;\n      this.lastTime = 0;\n      this.requestId = guid(0, 24, false);\n      this.pending = false;\n    } catch(err) {\n      console.error(err);\n    }\n  }\n\n  async init() {\n    // 初始化\n    const performance =\n      window.performance || window.msPerformance || window.webkitPerformance;\n    // 获取用户信息\n    // 各系统用户信息需要存储在localStorage中的 userInfo 字段\n    let userInfo = localStorage.getItem('userInfo');\n    if (userInfo) {\n      userInfo = JSON.parse(userInfo);\n      this.userInfo = userInfo;\n    }\n\n    this.timing = new MSTiming(performance);\n    this.device = new MSDevice();\n    this.mconsole = new MSConsole();\n    this.action = new MSUserAction(this.router, userInfo);\n\n    this.storage = new MSStorage(userInfo);\n   \n    const timing = await this.timing.getTime();\n    let obj = {};\n    for (let { key, value } of TimeLog) {\n      obj[value] = `${timing[key]}ms`;\n    }\n    this.mconsole.log(obj);\n    this.action.listenRouter();\n    this.action.listenAction(this.actionReport.bind(this));\n    this.mconsole.warn();\n    this.mconsole.error();\n    this.error.recordError(this.errorReport.bind(this));\n\n    this.msend = new MSSendData({\n      url: this.url,\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n    });\n    this.report()\n  }\n\n  getData() {\n    const timing = this.timing && this.timing.getTime();\n    const device = this.device && this.device.getInfo();\n    const consoleInfo = this.mconsole.getInfo();\n    const action = this.action.getInfo();\n    delete action.userInfo;\n    const { userId, name, realname, phoneNo } = this.userInfo || {};\n    consoleInfo['typeError'] = this.error.errorList;\n    let logObj = {\n      \"console\": consoleInfo,\n      \"action\": action\n    }\n    if (this.firstEnter) {\n      const result = this.storage && this.storage.get('MsError');\n      logObj = result[0] || {};\n    }\n    const data = {\n      project: this.projectName,\n      requestId: this.requestId,\n      httpHost: window.location.host,\n      requestUri: encodeURIComponent(window.location.href),\n      user: {\n        userId,\n        name: name || realname,\n        phoneNo,\n      },\n      // timing: this.firstEnter ? timing : null,\n      // device: this.firstEnter ? device : null,\n      timing: timing,\n      device: device,\n      logs: [logObj]\n    };\n    const conso = logObj.console\n    let dataStatus = 0\n    if (conso) {\n      if((conso.errorList && conso.errorList.length > 0) || (conso.typeError && conso.typeError.length > 0)) {\n        dataStatus = 1\n      } else if(conso.warnList && conso.warnList.length > 0) {\n        dataStatus = 2\n      }\n    }\n    \n    data['dataStatus'] = dataStatus;\n\n    return data;\n  }\n\n  getLogs() {\n    const consoleInfo = this.mconsole.getInfo();\n    const action = this.action.getInfo();\n    return {\n      \"console\": consoleInfo,\n      \"action\": action,\n      \"typeError\": this.error.errorList,\n    };\n  }\n\n  clearData() {\n    this.mconsole.clearInfo();\n    this.action.clearInfo();\n    this.firstEnter = false;\n    this.error.errorList = [];\n  }\n  listenLoad() {\n    this.error.handleAddListener(\"load\", () => {\n      setTimeout(async () => {\n        this.init();\n      }, 200)\n    });\n  }\n  listenUnload() {\n    let that = this;\n    this.error.handleAddListener(\"beforeunload\", () => {\n      that.saveLog();\n    });\n  }\n\n  listenVisible() {\n    let that = this;\n    this.error.handleAddListener(\"visibilitychange\", (e) => {\n      const state = document.visibilityState === 'visible';\n      if(state) {\n        setTimeout(() => {\n          that.saveLog();\n        }, 200);\n      }\n    });\n  }\n\n  saveLog() {\n    const data = this.getData();\n    const errList = this.storage && this.storage.get('MsError') || [];\n    \n    if(errList.length > 0) {\n      const conso = data.logs.console; \n      const action = data.logs.action;\n      const conso1 = errList[0].console;\n      const action1 = errList[0].action;\n      // 分别添加进对应的数组\n      const errorList = (conso && conso.errorList) || [];\n      errorList.push(...conso1.errorList);\n      const typeError = (conso && conso.typeError) || [];\n      typeError.push(...conso1.typeError);\n      const warnList = (conso && conso.warnList) || [];\n      warnList.push(...conso1.warnList);\n      // 分别添加进对应的数组\n      const clickList = (action && action.clickList) || [];\n      clickList.push(...action1.clickList);\n      const routeList = (action && action.routeList) || [];\n      routeList.push(...action1.routeList);\n    }\n    this.storage.set('MsError', data.logs);\n    return data;\n  }\n\n  clearLog() {\n    this.storage.set('MsError', []);\n  }\n\n  encodeData(value) {\n    const result = JSON.stringify(value);\n    return encode(result);\n  }\n  // 上报页面加载时间、设备信息\n  async report() {\n    const errList = this.saveLog();\n    if(this.firstEnter) {\n      this.reportData(errList);\n    }\n  }\n  // 上报错误\n  errorReport() {\n    const errorList = this.error.errorList\n    const errList = this.saveLog();\n    const bool1 = Date.now() - this.lastTime > this.reportTime;\n    const bool2 = errorList.length >= this.errorMaxNum;\n\n    if (bool1 && bool2) {\n      this.reportData(errList);\n    }\n  }\n  // 上报\n  actionReport() {\n    const clickList = this.action.clickList\n    const routeList = this.action.routeList\n    const data = this.saveLog();\n    const bool1 = Date.now() - this.lastTime > this.reportTime;\n    const bool2 = clickList.length >= this.actionMaxNum || routeList.length >= this.actionMaxNum;\n\n    if (bool1 && bool2) {\n      this.reportData(data);\n    }\n  }\n\n  async reportData(errList) {\n    if(this.pending) {\n      return false;\n    }\n    try {\n      this.pending = true;\n      await this.msend.xhrReport(this.encodeData(errList));\n      this.clearData();\n      this.clearLog();\n      this.lastTime = Date.now();\n      this.pending = false;\n    } catch(err) {\n      throw err\n    }\n  }\n}\nmodule.exports = {\n  MsWatch\n};","\n// 上报数据\nclass MSSendData {\n  constructor({ url, headers, method }) {\n    this.url = url;\n    this.headers = headers;\n    this.method = method;\n  }\n\n  xhrReport(data) {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open(this.method, this.url, false);\n      // xhr.withCredentials = true;\n      Object.keys(this.headers).forEach((key) => {\n        xhr.setRequestHeader(key, this.headers[key]);\n      });\n      xhr.onreadystatechange = () => {\n        if(+xhr.readyState === 4 && +xhr.status === 200) {\n          resolve(xhr.responseText)\n        }\n      }\n\n      xhr.onerror = (err) => {\n        reject(err)\n      }\n      xhr.ontimeout = (err) => {\n        reject(err)\n      }\n      xhr.send(this.transformData(data));\n    })\n  }\n\n  transformData(data) {\n    if (this.headers['Content-Type'] === 'application/x-www-form-urlencoded') {\n      const params = new URLSearchParams();\n      params.append('data', data);\n      return params;\n    } else {\n      // 其他类型\n      return JSON.stringify(data);\n    }\n  }\n  sendBeacon(data) {\n    return new Promise((resolve, reject) => {\n      try {\n        const blob = new Blob([JSON.stringify(data)], { \n          type: 'application/x-www-form-urlencoded; charset=UTF-8'\n        });\n        navigator.sendBeacon(this.url, blob);\n        resolve(this.data);\n      } catch (error) {\n        reject(error);\n      }\n    })\n  }\n}\n\nmodule.exports = {\n  MSSendData,\n};","// 存储类\nclass MSStorage {\n  constructor(userInfo) {\n    this.userId = userInfo && userInfo.userId;\n  }\n\n  get(key) {\n    if (!this.userId) {\n      return false;\n    }\n    const result = window.localStorage.getItem(`${key}-${this.userId}`);\n    if (result) {\n      return JSON.parse(result);\n    }\n    return false;\n  }\n\n  set(key, value) {\n    if (!this.userId) {\n      return false;\n    }\n    window.localStorage.setItem(`${key}-${this.userId}`, JSON.stringify(value));\n  }\n\n  remove(key) {\n    window.localStorage.removeItem(key);\n  }\n\n}\n\nmodule.exports = {\n  MSStorage,\n};","\n// const ttiPolyfill = require('tti-polyfill');\n// 获取页面加载时间\nclass MSTiming {\n  constructor(performance) {\n    const p =\n      window.performance ||\n      window.msPerformance ||\n      window.webkitPerformance;\n\n    this.performance = performance || p;\n    this.timing = performance.timing\n  }\n\n  getTime() {\n    var t = this.timing;\n    var obj = {\n      // timing: this.timing\n    };\n    // 重定向次数\n    obj.redirectCount = this.performance.navigation.redirectCount;\n    // 重定向耗时\n    obj.redirectTime = t.redirectEnd - t.redirectStart\n    // DNS解析，DNS查询耗时\n    obj.dnsTime = t.domainLookupEnd - t.domainLookupStart;\n    // TCP连接耗时\n    obj.connectTime = t.connectEnd - t.connectStart;\n    // HTTP请求耗时\n    obj.requestTime = t.responseEnd - t.requestStart;\n    // 获得首字节耗费时间，也叫TTFB\n    obj.firstByteTime = t.responseStart - t.domainLookupStart;\n    // 解析dom树耗时\n    obj.domReadyTime = t.domComplete - t.responseEnd;\n    // 白屏时间耗时\n    obj.whiteTime = t.responseStart - t.navigationStart;\n    // DOMready时间\n    obj.domLoadTime = t.domContentLoadedEventEnd - t.fetchStart;\n    // 脚本加载时间\n    obj.jsEventTime = t.domContentLoadedEventEnd - t.domContentLoadedEventStart\n    // 页面加载完成的时间 即：onload时间\n    obj.loadTime = t.loadEventEnd - t.fetchStart;\n    // 首屏时间\n    obj.paintTime = t.domComplete - t.fetchStart;\n    // 首次可交互时间\n    obj.ttiTime = t.domInteractive - t.fetchStart;\n    // FP首屏时间   FCP首次绘制时间  首次可交互时间  用户首次交互时间  \n    obj.fpTime = t.responseEnd - t.fetchStart;\n    // const res = this.getFPTime();\n    // const res = await this.getFirstPaintTime()\n    // obj.userKeyTime = {\n    //   fmpTime: obj.paintTime,\n    //   ...res,\n    // }\n    const result = {\n      ...obj,\n      // ...res,\n      // url: window.location.href,\n    };\n    for(let key in result) {\n      result[key] = Math.floor(result[key])\n    } \n    return result;\n  }\n\n  getFPTime() {\n    const performance = this.performance;\n    let obj = {\n      fpTime: -1,\n      fcpTime: -1,\n    };\n    if (typeof performance.getEntriesByType === 'function') {\n      const fpList = this.performance.getEntriesByName('first-paint');\n      const fcpList = this.performance.getEntriesByName('first-contentful-paint');\n      let fp = fpList && fpList[0] && fpList[0].startTime\n      let fcp = fcpList && fpList[0] && fcpList[0].startTime\n      obj = {\n        fpTime: fp,\n        fcpTime: fcp,\n      }\n    }\n    return obj;\n  }\n\n  async getFirstPaintTime() {\n    const performance = this.performance\n    let obj = {}\n    try {\n      if (typeof performance.getEntriesByType === 'function') {\n        const fpList = this.performance.getEntriesByName('first-paint');\n        const fcpList = this.performance.getEntriesByName('first-contentful-paint');\n        let fp = fpList && fpList[0] && fpList[0].duration\n        let fcp = fcpList && fcpList[0] && fcpList[0].duration\n        obj = {\n          fpTime: fp,\n          fcpTime: fcp,\n        }\n      } else {\n        let fp = -1\n        if (chrome && chrome.loadTimes) {\n          let loadTimes = window.chrome.loadTimes();\n          let { firstPaintTime, startLoadTime } = loadTimes;\n          fp = (firstPaintTime - startLoadTime) * 1000;\n        } else if (performance.timing && typeof performance.timing.msFirstPaint === 'number') {\n          let {msFirstPaint, navigationStart} = performance.timing;\n          fp = msFirstPaint - navigationStart;\n        }\n        obj = {\n          fpTime: fp,\n          fcpTime: -1,\n        }\n      }\n      const tti = await ttiPolyfill.getFirstConsistentlyInteractive()\n      obj['tti'] = tti\n      return obj\n    } catch (error) {\n      console.warn(error)\n      return obj\n    }\n  }\n}\n\nmodule.exports = {\n  MSTiming,\n};","// 记录采集用户信息操作\nclass MSUserAction {\n  constructor(router, userInfo) {\n    if(!router) {\n      throw new Error('请传入router实例')\n    }\n    this.userInfo = userInfo;\n    this.router = router;\n    this.routeList = [];\n    this.clickList = [];\n    this.content = '';\n  }\n  // 监听路由， 需要传入 router 实例\n  // TODO 待优化，可以解藕 \n  // 利用 window.onhashchange和 window.onpopstate获取路由跳转信息\n  listenRouter(callback) {\n    this.router.beforeEach && this.router.beforeEach((to, from, next) => {\n      const obj = {\n        to: {\n          fullPath: to.fullPath,\n          name: to.name,\n          params: to.params,\n          path: to.path,\n          query: to.query\n        },\n        from: {\n          fullPath: from.fullPath,\n          name: from.name,\n          params: from.params,\n          path: from.path,\n          query: from.query\n        },\n        createTime: Math.floor(Date.now() / 1000),\n      };\n      this.routeList.push(obj);\n      if(callback && typeof callback === 'function') {\n        callback(to, from);\n      }\n      next();\n    });\n  }\n\n  listenAction(callback) {\n    this.listenClick(callback);\n  }\n\n  handleAddListener(type, fn) {\n    if (window.addEventListener) {\n      window.addEventListener(type, fn, true);\n    } else {\n      window.attachEvent(\"on\" + type, fn);\n    }\n  }\n  // 获取 className ID\n  getClassName(target) {\n    let ids = target.id;\n    let className = target.className;\n    while(target && !target.id && !target.className) {\n      ids += ` ${target.id}`;\n      className += ` ${target.className}`;\n      target = target.parentElement;\n    }\n\n    return `id选择器:${ids} class选择器:${className}`;\n  }\n\n  findItem(array, { left, top, url }) {\n    for(let item of array) {\n      const bool1 = Math.abs(item.left - left) < 6;\n      const bool2 = Math.abs(item.top - top) < 6;\n      if(bool1 && bool2) {\n        return true;\n      }\n    }\n    return false;\n  }\n  // 监听点击事件，获取点击位置，点击元素信息\n  listenClick(callback) {\n    this.handleAddListener('click', (e) => {\n      const target = e.target;\n      const innerText = target.innerText.slice(0, 40);\n      const className = this.getClassName(target);\n      const obj = {\n        innerText,\n        className,\n        left: e.clientX || e.x || e.offsetX || e.pageX,\n        top: e.clientY || e.y || e.offsetY || e.pageY,\n        createTime: Math.floor(Date.now() / 1000),\n        url: encodeURIComponent(window.location.href),\n      };\n\n      if(!this.findItem(this.clickList, obj)) {\n        this.clickList.push(obj);\n      }\n      if (callback && typeof callback === 'function') {\n        callback()\n      }\n    })\n  }\n\n  getInfo() {\n    return {\n      // userInfo: this.userInfo.userInfo,\n      clickList: this.clickList,\n      routeList: this.routeList,\n    }\n  }\n\n  clearInfo() {\n    this.clickList = [];\n    this.routeList = [];\n  }\n}\n\n\nmodule.exports = {\n  MSUserAction\n};","\n\nconst guid = (start, end, isSlice = true) => {\n  const result = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,\n      v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n  return isSlice ? result.slice(start, end) : result;\n}\n\nconst tryError = (callback) => {\n  if(callback && typeof callback === 'function') {\n    try {\n      callback();\n    } catch (err) {\n      console.error(err);\n    }\n  }\n}\n\nmodule.exports = {\n  guid,\n  tryError,\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(138);\n"],"names":["root","factory","exports","module","define","amd","self","window","g","tab","version","_hasatob","atob","_hasbtoa","btoa","_hasBuffer","Buffer","_TD","TextDecoder","undefined","_TE","TextEncoder","b64chs","Array","prototype","slice","call","b64tab","forEach","c","i","b64re","_fromCC","String","fromCharCode","bind","_U8Afrom","Uint8Array","from","it","fn","x","map","_mkUriSafe","src","replace","m0","_tidyB64","s","btoaPolyfill","bin","u32","c0","c1","c2","asc","pad","length","charCodeAt","TypeError","substring","_btoa","toString","_fromUint8Array","u8a","strs","l","push","apply","subarray","join","fromUint8Array","urlsafe","cb_utob","cc","re_utob","utob","u","_encode","encode","encodeURI","re_btou","cb_btou","cccc","offset","btou","b","atobPolyfill","test","u24","r1","r2","charAt","_atob","_toUint8Array","a","toUint8Array","_unURI","_decode","decode","_noEnum","v","value","enumerable","writable","configurable","extendString","_add","name","body","Object","defineProperty","this","extendUint8Array","gBase64","VERSION","fromBase64","toBase64","encodeURL","isValid","extendBuiltins","keys","k","Base64","HOST","ENV","location","host","getBaseUrl","baseUrl","DEVELOP_LOCAL_HOST","initLog","log","console","TimeLog","key","reportSplitTime","errorNum","actionNum","MSConsole","constructor","infoList","infoFns","warnList","warnFns","errorList","errorFns","obj","color1","color2","info","callback","arg","url","encodeURIComponent","href","warn","createTime","Math","floor","Date","now","error","getInfo","clearInfo","MSDevice","performance","width","document","documentElement","clientWidth","height","clientHeight","userAgent","navigator","toLowerCase","p","msPerformance","webkitPerformance","osVersion","getOS","browserVersion","getExplore","network","getNetWork","memory","getMemory","appVersion","vendor","sys","ua","match","ie","edge","firefox","opera","weixin","chrome","safari","weibo","connection","mozConnection","webkitConnection","tyep","effectiveType","downlink","rtt","type","isOnline","onLine","computedSize","usedJSHeapSize","totalJSHeapSize","jsHeapSizeLimit","usedSize","toFixed","totalSize","limitSize","ErrorType","SyntaxError","ReferenceError","RangeError","ResourceError","HttpError","MSError","recordError","handleAddListener","e","dealError","handlerError","message","source","lineno","colno","findItem","array","errorType","outerHTML","item","bool1","bool2","result","getError","getSyntaxError","stack","split","errorText","target","nodeName","assign","getPromiseError","reason","getResourceError","toLocaleLowerCase","includes","className","top","left","y","getRunError","addEventListener","attachEvent","onerror","MSTiming","MSUserAction","MSSendData","MSStorage","guid","MsWatch","data","projectName","router","reportTime","errorMaxNum","actionMaxNum","listenLoad","listenUnload","listenVisible","timing","device","mconsole","action","storage","useInfo","timeId","Error","firstEnter","lastTime","requestId","pending","err","async","userInfo","localStorage","getItem","JSON","parse","getTime","listenRouter","listenAction","actionReport","errorReport","msend","method","headers","report","getData","consoleInfo","userId","realname","phoneNo","logObj","get","project","httpHost","requestUri","user","logs","conso","dataStatus","typeError","getLogs","clearData","setTimeout","init","that","saveLog","visibilityState","errList","conso1","action1","clickList","routeList","set","clearLog","encodeData","stringify","reportData","xhrReport","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","responseText","ontimeout","send","transformData","params","URLSearchParams","append","sendBeacon","blob","Blob","setItem","remove","removeItem","t","redirectCount","navigation","redirectTime","redirectEnd","redirectStart","dnsTime","domainLookupEnd","domainLookupStart","connectTime","connectEnd","connectStart","requestTime","responseEnd","requestStart","firstByteTime","responseStart","domReadyTime","domComplete","whiteTime","navigationStart","domLoadTime","domContentLoadedEventEnd","fetchStart","jsEventTime","domContentLoadedEventStart","loadTime","loadEventEnd","paintTime","ttiTime","domInteractive","fpTime","getFPTime","fcpTime","getEntriesByType","fpList","getEntriesByName","fcpList","startTime","duration","fp","loadTimes","firstPaintTime","startLoadTime","msFirstPaint","tti","ttiPolyfill","getFirstConsistentlyInteractive","content","beforeEach","to","next","fullPath","path","query","listenClick","getClassName","ids","id","parentElement","abs","innerText","clientX","offsetX","pageX","clientY","offsetY","pageY","start","end","isSlice","r","random","tryError","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","globalThis","Function"],"sourceRoot":""}